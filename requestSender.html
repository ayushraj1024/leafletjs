<html>
    <head>
        <title>XML Request Sender</title>
    </head>
    <body>
        <script>
            // 1. Create a new XMLHttpRequest object
            let xhr = new XMLHttpRequest();

            // 2. Configure it: GET-request for the URL /article/.../load
            xhr.open('POST', 'http://geoserver.cloudgis.in:8080/geoserver/wps');

            var operationName = "vec:BufferFeatureCollection";

            var xmlBodyCount = '<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">'
+  '<ows:Identifier>vec:Count</ows:Identifier>'
+  '<wps:DataInputs>'
+    '<wps:Input>'
+      '<ows:Identifier>features</ows:Identifier>'
+      '<wps:Reference mimeType="application/json" xlink:href="http://52.91.190.127:8080/geoserver/cite/ows?service=WFS&amp;version=1.0.0&amp;request=GetFeature&amp;typeName=cite%3Avillage_boundary_wgs84&amp;outputFormat=application%2Fjson" method="GET"/>'
+    '</wps:Input>'
+  '</wps:DataInputs>'
+  '<wps:ResponseForm>'
+    '<wps:RawDataOutput>'
+      '<ows:Identifier>result</ows:Identifier>'
+    '</wps:RawDataOutput>'
+  '</wps:ResponseForm>'
+ '</wps:Execute>';

            var xmlBodyIntersection = '<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">'
+ '<ows:Identifier>vec:IntersectionFeatureCollection</ows:Identifier>'
+  '<wps:DataInputs>'
+    '<wps:Input>'
+      '<ows:Identifier>first feature collection</ows:Identifier>'
+      '<wps:Reference mimeType="application/json" xlink:href="http://52.91.190.127:8080/geoserver/cite/ows?service=WFS&amp;version=1.0.0&amp;request=GetFeature&amp;typeName=cite%3Avillage_boundary_wgs84&amp;outputFormat=application%2Fjson" method="GET"/>'
+    '</wps:Input>'
+    '<wps:Input>'
+      '<ows:Identifier>second feature collection</ows:Identifier>'
+      '<wps:Reference mimeType="application/json" xlink:href="http://52.91.190.127:8080/geoserver/cite/ows?service=WFS&amp;version=1.0.0&amp;request=GetFeature&amp;typeName=cite%3Aschool_points_wgs84&amp;maxFeatures=3451&amp;outputFormat=application%2Fjson" method="GET"/>'
+    '</wps:Input>'
+    '<wps:Input>'
+      '<ows:Identifier>intersectionMode</ows:Identifier>'
+      '<wps:Data>'
+        '<wps:LiteralData>SECOND</wps:LiteralData>'
+      '</wps:Data>'
+    '</wps:Input>'
+  '</wps:DataInputs>'
+  '<wps:ResponseForm>'
+    '<wps:RawDataOutput mimeType="application/json">'
+      '<ows:Identifier>result</ows:Identifier>'
+    '</wps:RawDataOutput>'
+  '</wps:ResponseForm>'
+'</wps:Execute>';

            var xmlBodyBuffer = '<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">'
+  '<ows:Identifier>vec:BufferFeatureCollection</ows:Identifier>'
+ '<wps:DataInputs>'
+    '<wps:Input>'
+      '<ows:Identifier>features</ows:Identifier>'
+      '<wps:Reference mimeType="application/json" xlink:href="http://52.91.190.127:8080/geoserver/cite/ows?service=WFS&amp;version=1.0.0&amp;request=GetFeature&amp;typeName=cite%3Aschool_points_wgs84&amp;maxFeatures=3451&amp;outputFormat=application%2Fjson" method="GET"/>'
+    '</wps:Input>'
+    '<wps:Input>'
+      '<ows:Identifier>distance</ows:Identifier>'
+      '<wps:Data>'
+        '<wps:LiteralData>500</wps:LiteralData>'
+      '</wps:Data>'
+    '</wps:Input>'
+  '</wps:DataInputs>'
+  '<wps:ResponseForm>'
+    '<wps:RawDataOutput mimeType="application/json">'
+      '<ows:Identifier>result</ows:Identifier>'
+    '</wps:RawDataOutput>'
+  '</wps:ResponseForm>'
+ '</wps:Execute>'

            // 3. Send the request over the network
            var xmlBody = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><wps:Execute version=\"1.0.0\" service=\"WPS\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://www.opengis.net/wps/1.0.0\" xmlns:wfs=\"http://www.opengis.net/wfs\" xmlns:wps=\"http://www.opengis.net/wps/1.0.0\" xmlns:ows=\"http://www.opengis.net/ows/1.1\" xmlns:gml=\"http://www.opengis.net/gml\" xmlns:ogc=\"http://www.opengis.net/ogc\" xmlns:wcs=\"http://www.opengis.net/wcs/1.1.1\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xsi:schemaLocation=\"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd\">"
  + "<ows:Identifier>" + operationName + "</ows:Identifier>"
  + "<wps:DataInputs>"
  + "<wps:Input>"
  + "<ows:Identifier>features</ows:Identifier>"
  +     "<wps:Reference mimeType=\"text/xml\" xlink:href=\"http://geoserver/wfs\" method=\"POST\">"
  +     "<wps:Body>"
  +       "<wfs:GetFeature service=\"WFS\" version=\"1.0.0\" outputFormat=\"GML2\" xmlns:sf=\"http://www.openplans.org/spearfish\">"
  +         "<wfs:Query typeName=\"topp:states\"/>"
  +       "</wfs:GetFeature>"
  +     "</wps:Body>"
  +   "</wps:Reference>"
  + "</wps:Input>"
  + "<wps:Input>"
  +    "<ows:Identifier>aggregationAttribute</ows:Identifier>"
  +   "<wps:Data>"
  +     "<wps:LiteralData>PERSONS</wps:LiteralData>"
  +   "</wps:Data>"
  + "</wps:Input>"
  + "<wps:Input>"
  +    "<ows:Identifier>function</ows:Identifier>"
  +    "<wps:Data>"
  +     "<wps:LiteralData>Count</wps:LiteralData>"
  +   "</wps:Data>"
  +  "</wps:Input>"
  + "<wps:Input>"
  +   "<ows:Identifier>function</ows:Identifier>"
  +   "<wps:Data>"
  +     "<wps:LiteralData>Average</wps:LiteralData>"
  +    "</wps:Data>"
  + "</wps:Input>"
  + "<wps:Input>"
  +   "<ows:Identifier>singlePass</ows:Identifier>"
  +   "<wps:Data>"
  +     "<wps:LiteralData>false</wps:LiteralData>"
  +    "</wps:Data>"
  + "</wps:Input>"
  + "<wps:Input>"
  +   "<ows:Identifier>groupByAttributes</ows:Identifier>"
  +   "<wps:Data>"
  +     "<wps:LiteralData>SUB_REGION</wps:LiteralData>"
  +    "</wps:Data>"
  + "</wps:Input>"
  + "</wps:DataInputs>"
  + "<wps:ResponseForm>"
  + "<wps:RawDataOutput mimeType=\"application/json\">"
  +    "<ows:Identifier>result</ows:Identifier>"
  + "</wps:RawDataOutput>"
  + "</wps:ResponseForm>"
  + "</wps:Execute>";

            xhr.send(xmlBodyIntersection);

            // 4. This will be called after the response is received
            xhr.onload = function() {
            if (xhr.status != 200) { // analyze HTTP status of the response
                alert(`Error ${xhr.status}: ${xhr.statusText}`); // e.g. 404: Not Found
            } else { // show the result
                alert(`Done, got ${xhr.response.length} bytes`);
                console.log(`${xhr.response}`); // response is the server response
            }
            };

            xhr.onprogress = function(event) {
            if (event.lengthComputable) {
                alert(`Received ${event.loaded} of ${event.total} bytes`);
            } else {
                alert(`Received ${event.loaded} bytes`); // no Content-Length
            }

            };

            xhr.onerror = function() {
            alert("Request failed");
            };
        </script>
    </body>
</html>